import{_ as t,o as s,c as o,V as e}from"./chunks/framework.b2940161.js";const b=JSON.parse('{"title":"window.close()兼容性解决方案","description":"","frontmatter":{"aside":false},"headers":[],"relativePath":"blog/003-window.close.md","filePath":"blog/003-window.close.md","lastUpdated":1690418015000}'),a={name:"blog/003-window.close.md"},n=e(`<h1 id="window-close-兼容性解决方案" tabindex="-1">window.close()兼容性解决方案 <a class="header-anchor" href="#window-close-兼容性解决方案" aria-label="Permalink to &quot;window.close()兼容性解决方案&quot;">​</a></h1><blockquote><p>发现 window.close()在 mac 的 Safari 下无效，所以做一下总结</p></blockquote><h2 id="总结介绍" tabindex="-1">总结介绍 <a class="header-anchor" href="#总结介绍" aria-label="Permalink to &quot;总结介绍&quot;">​</a></h2><table><thead><tr><th>序号</th><th>关闭代码</th><th>需要确认</th><th>无任何作用</th><th>无需确认</th><th>测试</th></tr></thead><tbody><tr><td>1</td><td>window.close()</td><td>IE7</td><td>firefox,chrome, safari</td><td>Opera</td><td>Close</td></tr><tr><td>2</td><td>window.opener=null; window.open(&#39;&#39;,&#39;_self&#39;); window.close();</td><td></td><td>firefox</td><td>IE7,Opera， chrome,safari</td><td>Close</td></tr><tr><td>3</td><td>window.open(&#39;&#39;,&#39;_self&#39;); window.close();</td><td></td><td>firefox</td><td>IE7,Opera， chrome,safari</td><td>Close</td></tr><tr><td>4</td><td>window.opener=null; window.close();</td><td>IE7</td><td>firefox，safari</td><td>chrome,Opera</td><td>Close</td></tr><tr><td>5</td><td>var opened=window.open(&#39;about:blank&#39;,&#39;_self&#39;); opened.opener=null; opened.close();</td><td></td><td>firefox</td><td>safari,IE7, chrome,Opera</td><td>Close</td></tr><tr><td>6</td><td>var opened=window.open(&#39;about:blank&#39;,&#39;_self&#39;); opened.close();</td><td></td><td>safari,firefox</td><td>firefox，IE7, chrome,Opera</td><td>Close</td></tr></tbody></table><p>用多种方式打开一个页面，然后用 window.close() 关闭它，在各浏览器下表现有所不同。如在地址栏中直接输入URL 时，Firefox Chrome Safari 下调用 window.close() 关闭页面无效。再如 Ctrl + 点击链接打开的窗口，Firefox 下无法通过调用 window.close() 来关闭。</p><h2 id="差异总结" tabindex="-1">差异总结 <a class="header-anchor" href="#差异总结" aria-label="Permalink to &quot;差异总结&quot;">​</a></h2><table><thead><tr><th></th><th>地址栏输入URL</th><th>点击链接</th><th>Ctrl键+点击链接</th><th>window.open</th><th>window.showModalDialog</th></tr></thead><tbody><tr><td>IE6</td><td><strong>提示窗口关闭</strong></td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td></tr><tr><td>IE7/8</td><td>直接关闭</td><td><strong>提示窗口关闭</strong></td><td><strong>提示窗口关闭</strong></td><td>直接关闭</td><td>直接关闭</td></tr><tr><td>Firefox</td><td><strong>不关闭，无提示</strong></td><td>直接关闭</td><td><strong>不关闭，无提示</strong></td><td>直接关闭</td><td>直接关闭</td></tr><tr><td>Safari</td><td><strong>不关闭，无提示</strong></td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td></tr><tr><td>Chrome</td><td><strong>不关闭，无提示</strong></td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td></tr><tr><td>Opera</td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td><td>直接关闭</td><td><strong>不支持</strong></td></tr></tbody></table><h2 id="safari-无法关闭" tabindex="-1">Safari 无法关闭 <a class="header-anchor" href="#safari-无法关闭" aria-label="Permalink to &quot;Safari 无法关闭&quot;">​</a></h2><p>亲测有效</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> opened</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">about:blank</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_self</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> opened</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">opener</span><span style="color:#89DDFF;">=null;</span></span>
<span class="line"><span style="color:#A6ACCD;"> opened</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="firefox-无法关闭" tabindex="-1">Firefox 无法关闭 <a class="header-anchor" href="#firefox-无法关闭" aria-label="Permalink to &quot;Firefox 无法关闭&quot;">​</a></h2><p>不是JS代码 <code>window.close()</code>的问题，而是 <code>Firefox</code> 的配置问题，解决方法如下： 在<code>Firefox</code> 地址栏里输入 <code>about:config</code> 在配置列表中找到 <code>dom.allow_scripts_to_close_windows</code> 点右键的选切换把上面的 <code>false</code> 修改为<code>true</code> 即可。 注：默认是 <code>false</code>，是为了防止脚本乱关窗口</p><p>另附代码：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//为了不出现提示框 </span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">opener </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//关闭窗口</span></span>
<span class="line"><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,14),d=[n];function l(r,p,c,i,h,w){return s(),o("div",null,d)}const D=t(a,[["render",l]]);export{b as __pageData,D as default};
